"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),mSidebar=function(){function mSidebar(){_classCallCheck(this,mSidebar),this.propertyName=null,this.items=[],this.options={baseURL:"",position:"left",closeButton:!0,closeOnBackgroundClick:!0,animationType:"css",onOpen:null,onClose:null,setItems:void 0,setContent:void 0};for(var i=0;i<arguments.length;i++){var argument=arguments[i];if("string"==typeof argument)this.propertyName=argument;else if("[object Array]"==Object.prototype.toString.call(argument))for(var i2=0;i2<argument.length;i2++)this.addItem(argument[i2],!1);else if("object"===("undefined"==typeof argument?"undefined":_typeof(argument)))for(var variable in argument)this.options[variable]=argument[variable];else"function"==typeof argument&&(this.options.onOpen=argument)}var newBar=document.createElement("aside");return this.target=newBar,newBar.className+=" mSidebar mSidebar--"+this.options.position,newBar.innerHTML='<div class="mSidebar-container">\n            <header>\n                '+(this.options.closeButton?'<div class="mSidebar-close"></div>':"")+'\n            </header>\n            <div class="mSidebar-content"></div>\n            <footer></footer>\n        </div>',this.refreshItems(),document.body.appendChild(newBar),this.propertyName&&eval("mSidebar."+this.propertyName+"=this"),this.options.closeButton&&newBar.querySelector(".mSidebar-close").addEventListener("click",this.close.bind(this)),newBar.addEventListener("click",this._onClick.bind(this)),this.options.setItems&&this.setItems(this.options.setItems),this.options.setContent&&this.setContent(this.options.setContent),this}return _createClass(mSidebar,[{key:"_itemToHTML",value:function(e){var t=this,i=e.title,a=e.text,n=e.link,s=e.follow,r=void 0===s?!0:s,o=e.items,c=void 0===o?[]:o;0!==n.search(/^(https?|ftp):/)&&(n=this.options.baseURL.replace(/\/$/,"")+"/"+n.replace(/^\//,""));var l="";return l=0===c.length?'<a href="'+n+'" title="'+(i?i:a)+'"'+(r?"":' rel="nofollow"')+' class="mSidebar-item">'+a+"</a>":'\n            <div class="mSidebar-collapse">\n                <div class="mSidebar-collapse-button"></div>\n                <a href="'+n+'" title="'+(i?i:a)+'"'+(r?"":' rel="nofollow"')+' class="mSidebar-collapse-header">'+a+'</a>\n                <div class="mSidebar-collapse-items">\n                    '+c.reduce(function(e,i){return e+t._itemToHTML(i)},"")+"\n                </div>\n            </div>"}},{key:"refreshItems",value:function(){var e="";for(var t in this.items)e+=this._itemToHTML(this.items[t]);return this.target.querySelector(".mSidebar-content").innerHTML=e,this}},{key:"setItems",value:function(e){this.items=[];for(var t=document.querySelectorAll(e),i=0;i<t.length;i++)console.log(t[i]),this.addItem({title:t[i].getAttribute("title"),text:t[i].innerHTML.replace(/<[^>]+>/g,""),link:t[i].getAttribute("href"),follow:"nofollow"!==t[i].getAttribute("rel")},!1);return this.refreshItems(),this}},{key:"setContent",value:function(e){return this.target.querySelector(".mSidebar-content").innerHTML=document.querySelector(e).innerHTML,this}},{key:"addItem",value:function(e){var t=e.title,i=e.text,a=e.link,n=e.follow,s=void 0===n?!0:n,r=e.items,o=void 0===r?[]:r,c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(0===arguments.length)return!1;"string"==typeof arguments[0]&&(t=arguments[0],i=arguments[0],a=arguments[0].toLowerCase().replace(/[^a-z0-9]/,""));var l={title:t,text:i,link:a,follow:s,items:o};return this.items.push(l),c&&this.refreshItems(),this}}]),_createClass(mSidebar,[{key:"_onClick",value:function(e){e.target===this.target&&this.options.closeOnBackgroundClick&&this.close.call(this);var t=" "+e.target.className+" ";if(t.indexOf(" mSidebar-collapse-button ")>-1){var i=e.target.parentNode;(" "+i.className+" ").indexOf(" mSidebar-collapse--open ")>-1?i.className=i.className.replace(/( |$)mSidebar-collapse--open/,""):i.className+=" mSidebar-collapse--open"}}},{key:"open",value:function(){return(" "+this.target.className+" ").indexOf(" mSidebar--close ")>-1?this.target.className=this.target.className.replace("mSidebar--close","mSidebar--open"):this.target.className+=" mSidebar--open",this.options.onOpen&&this.options.onOpen.call(this),this}},{key:"close",value:function(){return this.target.className=this.target.className.replace("mSidebar--open","mSidebar--close"),this.options.onClose&&this.options.onClose.call(this),this}},{key:"toggle",value:function(){return(" "+this.target.className+" ").indexOf(" mSidebar--open ")>-1?this.close():this.open(),this}}]),mSidebar}(),sideBara={target:null,changeTarget:function(e){e&&(this.target=$(e)),this.target.is(".sideBar")||(this.target=this.target.parents(".sideBar"))},open:function(e){this.changeTarget(e),this.target.is(".sideBar--full")?(TweenMax.set(this.target,{display:"block"}),TweenMax.from(this.target,.24,{opacity:0}),TweenMax.staggerFrom(this.target.find(".sideBar-item"),.35,{xPercent:-20,opacity:0,delay:.15},.07)):this.target.is(".sideBar--left")?(TweenMax.set(this.target,{display:"block"}),TweenMax.from(this.target,.24,{opacity:0}),TweenMax.from(this.target.find(".sideBar-container"),.24,{xPercent:-100,opacity:0,delay:.3}),TweenMax.from(this.target.find(".sideBar-item"),.35,{xPercent:-20,opacity:.4,delay:.43})):this.target.is(".sideBar--right")?(TweenMax.set(this.target,{display:"block"}),TweenMax.from(this.target,.24,{opacity:0}),TweenMax.from(this.target.find(".sideBar-container"),.24,{xPercent:100,opacity:0,delay:.3}),TweenMax.from(this.target.find(".sideBar-item"),.35,{xPercent:-20,opacity:.4,delay:.43})):this.target.is(".sideBar--top")?(this.target.css("display","block"),TweenMax.to(this.target,.2,{opacity:1}),TweenMax.from(this.target.find(".sideBar-container"),.4,{opacity:"0.4",yPercent:-100,delay:.2}),TweenMax.staggerFrom(this.target.find(".sideBar-item"),.55,{opacity:"0",y:-55,scale:.3},.08)):this.target.is(".sideBar--bottom")&&(this.target.css("display","block"),TweenMax.to(this.target,.2,{opacity:1}),TweenMax.from(this.target.find(".sideBar-container"),.4,{opacity:"0.4",yPercent:100,delay:.2}),TweenMax.staggerFrom(this.target.find(".sideBar-item"),.55,{opacity:"0",y:-55,scale:.3},.08))},close:function(e){this.changeTarget(e),this.target.is(".sideBar--full")?(TweenMax.staggerTo(this.target.find(".sideBar-item"),.35,{xPercent:-20,opacity:0},.07),TweenMax.to(this.target,.24,{opacity:0,delay:.6,onComplete:function(){TweenMax.set(this.target,{display:"none",opacity:1}),TweenMax.set(this.target.find(".sideBar-container"),{xPercent:0,opacity:1}),TweenMax.set(this.target.find(".sideBar-item"),{xPercent:0,opacity:1})}})):this.target.is(".sideBar--left")?(TweenMax.to(this.target.find(".sideBar-item"),.25,{xPercent:-20,opacity:.4}),TweenMax.to(this.target.find(".sideBar-container"),.25,{xPercent:-100,opacity:0,delay:.1}),TweenMax.to(this.target,.24,{opacity:0,delay:.43,onComplete:function(){TweenMax.set(this.target,{display:"none",opacity:1}),TweenMax.set(this.target.find(".sideBar-container"),{xPercent:0,opacity:1}),TweenMax.set(this.target.find(".sideBar-item"),{xPercent:0,opacity:1})}})):this.target.is(".sideBar--right")?(TweenMax.to(this.target.find(".sideBar-item"),.25,{xPercent:-20,opacity:.4}),TweenMax.to(this.target.find(".sideBar-container"),.25,{xPercent:100,opacity:0,delay:.1}),TweenMax.to(this.target,.24,{opacity:0,delay:.43,onComplete:function(){TweenMax.set(this.target,{display:"none",opacity:1}),TweenMax.set(this.target.find(".sideBar-container"),{xPercent:0,opacity:1}),TweenMax.set(this.target.find(".sideBar-item"),{xPercent:0,opacity:1})}})):this.target.is(".sideBar--top")?(TweenMax.staggerTo(this.target.find(".sideBar-item"),.55,{opacity:"0",y:-55,scale:.3},.08),TweenMax.to(this.target.find(".sideBar-container"),.4,{opacity:"0.4",yPercent:-100,delay:.5}),TweenMax.to(this.target,.2,{opacity:0,delay:.8,onComplete:function(){TweenMax.set(this.target,{display:"none",opacity:1}),TweenMax.set(this.target.find(".sideBar-container"),{yPercent:0,opacity:1}),TweenMax.set(this.target.find(".sideBar-item"),{y:0,opacity:1,scale:1})}})):this.target.is(".sideBar--bottom")&&(TweenMax.staggerTo(this.target.find(".sideBar-item"),.55,{opacity:"0",y:55,scale:.3},.08),TweenMax.to(this.target.find(".sideBar-container"),.4,{opacity:"0.4",yPercent:100,delay:.5}),TweenMax.to(this.target,.2,{opacity:0,delay:.8,onComplete:function(){TweenMax.set(this.target,{display:"none",opacity:1}),TweenMax.set(this.target.find(".sideBar-container"),{yPercent:0,opacity:1}),TweenMax.set(this.target.find(".sideBar-item"),{y:0,opacity:1,scale:1})}}))},init:function(){$(".sideBar").click(function(e){var t=$(e.target);t.is(".sideBar-close, .sideBar")&&sideBar.close(this)})}};